<template name="_draft">
    <div id="dbd">

        <div id="roleSelect">
            {{#with currentRole}}
                <div class="role">
                    <p>Роль</p>
                    <div class="roleItems">
                        <div class="roleItem">
                            <span>Кэрри</span>
                            <div data-role="carry" class="{{build}} {{#if eq role 'carry'}}current{{/if}}"><img src="/css/images/carry.png" width="70"></div>
                        </div>
                        <div class="roleItem">
                            <span>Лесник</span>
                            <div data-role="jungler" class="{{build}} {{#if eq role 'jungler'}}current{{/if}}"><img src="/css/images/jungler.png" width="70"></div>
                        </div>
                        <div class="roleItem">
                            <span>Капитан</span>
                            <div data-role="captain" class="{{build}} {{#if eq role 'captain'}}current{{/if}}"><img src="/css/images/captain.png" width="70"></div>
                        </div>
                    </div>
                </div>
                <div class="build">
                    <p>Сборка</p>
                    <div class="buildItems">
                        <div class="buildItem weapons {{#if eq build 'weapons'}}current{{/if}}" data-build="weapons">Оружие</div>
                        <div class="buildItem crystal {{#if eq build 'crystal'}}current{{/if}}" data-build="crystal">Кристалл</div>
                        <div class="buildItem support {{#if eq build 'support'}}current{{/if}}" data-build="support">Поддержка</div>
                    </div>
                </div>
            {{/with}}
        </div>


        {{#if is_admin}}
            <button id="closeDBD">Закрыть драфт</button>
        {{/if}}
        <div class="wrap">

            <div class="block-action teamA">
                <div id="action-step0" class="ban {{#if isCurrent 0}}current{{/if}}" style="{{styleStep 0}}"></div>
                <div id="action-step2" data-team="A" data-position="0" class="pick {{#if isCurrent 2}}current{{/if}}" style="{{styleStep 2}}">
                    {{#if isCurrent '0-2'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 0}}{{>_draft_player}}{{/with}}
                </div>
                <div id="action-step5" class="ban {{#if isCurrent 5}}current{{/if}}" style="{{styleStep 5}}"></div>
                <div id="action-step7" data-team="A" data-position="1" class="pick {{#if isCurrent 7}}current{{/if}}" style="{{styleStep 7}}">
                    {{#if isCurrent '5-7'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 1}}{{>_draft_player}}{{/with}}
                </div>
                <div id="action-step8" data-team="A" data-position="2" class="pick {{#if isCurrent 8}}current{{/if}}" style="{{styleStep 8}}">
                    {{#if isCurrent '8'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 2}}{{>_draft_player}}{{/with}}
                </div>
            </div>

            <div id="heroesIcons">
                {{#each heroes}}
                    <div class="{{class}} heroSelector" data-name="{{name}}"
                         style="background-image: url('/img/{{name}}.gif')">
                        <div class="likeSelected">
                            {{#each likes}}
                                <span><img src="/css/images/{{action}}.png"> {{name}}</span>
                            {{/each}}
                        </div>
                        <div class="likeSelector hidden">
                            <img data-action="like" data-name="{{name}}" src="/css/images/like.png">
                            <img data-action="dislike" data-name="{{name}}" src="/css/images/dislike.png">
                        </div>
                    </div>{{/each}}
            </div>

            <div class="block-action teamB">
                <div id="action-step1" class="ban {{#if isCurrent 1}}current{{/if}}" style="{{styleStep 1}}"></div>
                <div id="action-step3" data-team="B" data-position="0" class="pick {{#if isCurrent 3}}current{{/if}}" style="{{styleStep 3}}">
                    {{#if isCurrent '1-3'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 0}}{{>_draft_player}}{{/with}}
                </div>
                <div id="action-step4" class="ban {{#if isCurrent 4}}current{{/if}}" style="{{styleStep 4}}"></div>
                <div id="action-step6" data-team="B" data-position="1" class="pick {{#if isCurrent 6}}current{{/if}}" style="{{styleStep 6}}">
                    {{#if isCurrent '4-6'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 1}}{{>_draft_player}}{{/with}}
                </div>
                <div id="action-step9" data-team="B" data-position="2" class="pick {{#if isCurrent 9}}current{{/if}}" style="{{styleStep 9}}">
                    {{#if isCurrent '9'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 2}}{{>_draft_player}}{{/with}}
                </div>
            </div>
        </div>
    </div>
</template>

<template name="_draft_time">
    {{#with time}}
        <div class="c100 p{{.}} {{#if eq . 100}}red{{/if}}">
            <span>{{.}}</span>
            <div class="slice">
                <div class="bar"></div>
                <div class="fill"></div>
            </div>
        </div>
    {{/with}}
</template>

<template name="_draft_player">
    {{#with role}}
        <div class="playerRole {{build}}">
            {{#if role}}
                <img src="/css/images/{{role}}.png" width="40">
            {{/if}}
        </div>
    {{/with}}
    <div class="playerName">
        <li data-id="{{_id}}" data-name="{{name}}">
            <div class="online {{#unless online}}offline{{/unless}}"></div>{{name}} {{{levelM vg_level}}}
        </li>
    </div>
</template>