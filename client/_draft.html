<template name="_draft">
    <div id="dbd">

        <div id="roleSelect">
            {{#with currentRole}}
                <div class="role">
                    <p>Роль</p>
                    <div class="roleItems">
                        <div class="roleItem">
                            <span>Кэрри</span>
                            <div data-role="carry" class="{{build}} {{#if eq role 'carry'}}current{{/if}}"><img src="/css/images/carry.png" width="70"></div>
                        </div>
                        <div class="roleItem">
                            <span>Лесник</span>
                            <div data-role="jungler" class="{{build}} {{#if eq role 'jungler'}}current{{/if}}"><img src="/css/images/jungler.png" width="70"></div>
                        </div>
                        <div class="roleItem">
                            <span>Капитан</span>
                            <div data-role="captain" class="{{build}} {{#if eq role 'captain'}}current{{/if}}"><img src="/css/images/captain.png" width="70"></div>
                        </div>
                    </div>
                </div>
                <div class="build">
                    <p>Сборка</p>
                    <div class="buildItems">
                        <div class="buildItem weapons {{#if eq build 'weapons'}}current{{/if}}" data-build="weapons">Оружие</div>
                        <div class="buildItem crystal {{#if eq build 'crystal'}}current{{/if}}" data-build="crystal">Кристалл</div>
                        <div class="buildItem support {{#if eq build 'support'}}current{{/if}}" data-build="support">Поддержка</div>
                    </div>
                </div>
            {{/with}}
        </div>

        {{#if is_admin}}
            <button id="closeDBD">Закрыть драфт</button>
        {{/if}}

        <div class="wrap">

            <div class="block-action teamA">

                {{! 0. Первый слева банит.}}
                <div id="action-step0" class="forTap ban {{#if isCurrent 0}}current{{/if}}" style="{{styleStep 0}}"></div>

                {{! 2. Первый слева пикает}}
                <div id="action-step2" data-team="A" data-position="0" class="forTap pick {{#if isCurrent 2}}current{{/if}} {{#if isCurrent '0-2-7-12'}}currentPlayer{{/if}}" style="{{styleStep 2}}">
                    {{#if isCurrent '0-2-7-12'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 0}}{{>_draft_player}}{{/with}}
                </div>

                {{! 5. Второй слева пикает}}
                <div id="action-step5" data-team="A" data-position="1" class="forTap pick {{#if isCurrent 5}}current{{/if}} {{#if isCurrent '5'}}currentPlayer{{/if}}" style="{{styleStep 5}}">
                    {{#if isCurrent '5'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 1}}{{>_draft_player}}{{/with}}
                </div>

                {{! 7. Первый слева банит}}
                <div id="action-step7" class="forTap ban {{#if isCurrent 7}}current{{/if}}" style="{{styleStep 7}}"></div>

                {{! 9. Третий слева пикает}}
                <div id="action-step9" data-team="A" data-position="2" class="forTap pick {{#if isCurrent 9}}current{{/if}} {{#if isCurrent '9'}}currentPlayer{{/if}}" style="{{styleStep 9}}">
                    {{#if isCurrent '9'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 2}}{{>_draft_player}}{{/with}}
                </div>

                {{! 10. Четвертый слева пикает}}
                <div id="action-step10" data-team="A" data-position="3" class="forTap pick {{#if isCurrent 10}}current{{/if}} {{#if isCurrent '10'}}currentPlayer{{/if}}" style="{{styleStep 10}}">
                    {{#if isCurrent '10'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 3}}{{>_draft_player}}{{/with}}
                </div>

                {{! 12. Первый слева банит}}
                <div id="action-step12" class="forTap ban {{#if isCurrent 12}}current{{/if}}" style="{{styleStep 12}}"></div>

                {{! 14. Пятый слева пикает}}
                <div id="action-step14" data-team="A" data-position="4" class="forTap pick {{#if isCurrent 14}}current{{/if}} {{#if isCurrent '14'}}currentPlayer{{/if}}" style="{{styleStep 14}}">
                    {{#if isCurrent '14'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'A' 4}}{{>_draft_player}}{{/with}}
                </div>
            </div>

            <div id="heroesIcons">
                {{#each heroes}}
                    <div class="{{class}} heroSelector" data-name="{{name}}" style="background-image: url('/img/{{name}}.gif')">
                        <div class="likeSelected">
                            {{#each likes}}
                                <span><img src="/css/images/{{action}}.png"> {{name}}</span>
                            {{/each}}
                        </div>
                        <div class="likeSelector hidden">
                            <img data-action="like" data-name="{{name}}" src="/css/images/like.png">
                            <img data-action="dislike" data-name="{{name}}" src="/css/images/dislike.png">
                        </div>
                    </div>
                {{/each}}
            </div>

            <div class="block-action teamB">

                {{! 1. Первый справа банит}}
                <div id="action-step1" class="forTap ban {{#if isCurrent 1}}current{{/if}}" style="{{styleStep 1}}"></div>

                {{! 3. Первый справа пикает}}
                <div id="action-step3" data-team="B" data-position="0" class="forTap pick {{#if isCurrent 3}}current{{/if}} {{#if isCurrent '1-3-6-13'}}currentPlayer{{/if}}" style="{{styleStep 3}}">
                    {{#if isCurrent '1-3-6-13'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 0}}{{>_draft_player}}{{/with}}
                </div>

                {{! 4. Второй справа пикает}}
                <div id="action-step4" data-team="B" data-position="1" class="forTap pick {{#if isCurrent 4}}current{{/if}} {{#if isCurrent '4'}}currentPlayer{{/if}}" style="{{styleStep 4}}">
                    {{#if isCurrent '4'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 1}}{{>_draft_player}}{{/with}}
                </div>

                {{! 6. Первый справа банит}}
                <div id="action-step6" class="forTap ban {{#if isCurrent 6}}current{{/if}}" style="{{styleStep 6}}"></div>

                {{! 8. Третий справа пикает}}
                <div id="action-step8" data-team="B" data-position="2" class="forTap pick {{#if isCurrent 8}}current{{/if}} {{#if isCurrent '8'}}currentPlayer{{/if}}" style="{{styleStep 8}}">
                    {{#if isCurrent '8'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 2}}{{>_draft_player}}{{/with}}
                </div>

                {{! 11. Четвертый справа пикает}}
                <div id="action-step11" data-team="B" data-position="3" class="forTap pick {{#if isCurrent 11}}current{{/if}} {{#if isCurrent '11'}}currentPlayer{{/if}}" style="{{styleStep 11}}">
                    {{#if isCurrent '11'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 3}}{{>_draft_player}}{{/with}}
                </div>

                {{! 13. Первый справа банит}}
                <div id="action-step13" class="forTap ban {{#if isCurrent 13}}current{{/if}}" style="{{styleStep 13}}"></div>

                {{! 15. Пятый справа пикает}}
                <div id="action-step15" data-team="B" data-position="4" class="forTap pick {{#if isCurrent 15}}current{{/if}} {{#if isCurrent '15'}}currentPlayer{{/if}}" style="{{styleStep 15}}">
                    {{#if isCurrent '15'}}{{>_draft_time}}{{/if}}
                    {{#with playerPlace 'B' 4}}{{>_draft_player}}{{/with}}
                </div>
            </div>
        </div>
    </div>
</template>

<template name="_draft_time">
    {{#with time}}
        <div class="c100 p{{.}} {{#if eq . 100}}red{{/if}}">
            <span>{{.}}%</span>
            <div class="slice">
                <div class="bar"></div>
                <div class="fill"></div>
            </div>
        </div>
    {{/with}}
</template>

<template name="_draft_player">
    {{#with role}}
        <div class="playerRole {{build}}">
            {{#if role}}
                <img src="/css/images/{{role}}.png" width="40">
            {{/if}}
        </div>
    {{/with}}
    <div class="playerName">
        <li data-id="{{_id}}" data-name="{{name}}">
            <div class="online {{#unless online}}offline{{/unless}}"></div>{{name}} {{{levelM vg_level}}}
        </li>
    </div>
</template>